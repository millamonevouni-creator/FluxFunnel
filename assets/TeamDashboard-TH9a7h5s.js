import{j as e}from"./index-eBZt-p7n.js";import{r as i}from"./vendor-KfUPlHYY.js";import{P as V}from"./PremiumLockScreen-BhDJvr9b.js";import{t as L,C as D,j as C,u as U,i as y,f as G,d as H,aQ as Q,bc as W,X}from"./ui-DazhNhsc.js";import"./utils-ig63ahen.js";const te=({members:u=[],onInviteMember:E,onUpdateRole:$,onRemoveMember:A,onResendInvite:I,onUpgrade:M,plan:k,maxMembers:b,isDark:s,t:B})=>{const z=s?"bg-slate-800 border-slate-700":"bg-white border-slate-200",c=s?"text-white":"text-slate-900",n=s?"text-slate-400":"text-slate-500",r=Array.isArray(u)?u:[],l=typeof b=="number"?b:0,h=k||"FREE",[P,x]=i.useState(!1),[g,v]=i.useState(""),[R,S]=i.useState("CONVIDADO"),[p,f]=i.useState(""),[O,J]=i.useState("EDITOR"),[j,N]=i.useState(!1),m=i.useRef(null);if(h!=="PREMIUM")return e.jsx(V,{title:"Colaboração em Equipe",description:"A gestão de equipe e permissões avançadas está disponível exclusivamente para assinantes do plano Premium.",features:["Convide membros ilimitados","Defina permissões (Admin, Editor, Visualizador)","Histórico de atividades da equipe"],onUpgrade:M,isDark:s});const o=l>0?r.length/l*100:0,d=r.length>=l&&l!==9999;i.useEffect(()=>{if(m.current){const t=Math.min(Math.max(o,0),100),a=m.current.parentElement;a&&(m.current.style.width=`${t}%`,a.setAttribute("role","progressbar"),a.setAttribute("aria-valuenow",Math.round(t).toString()),a.setAttribute("aria-valuemin","0"),a.setAttribute("aria-valuemax","100"))}},[o]);const F=async t=>{t.preventDefault(),N(!0);try{await E(p.trim(),O,g,R),f(""),v(""),S("CONVIDADO"),x(!1)}catch(a){console.error(a)}finally{N(!1)}};return e.jsxs("div",{className:`flex-1 overflow-y-auto h-full p-8 transition-colors duration-300 ${s?"bg-slate-950":"bg-slate-50"}`,children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-end mb-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-3xl font-bold ${c} mb-2`,children:"Gestão de Equipe"}),e.jsx("p",{className:n,children:"Adicione colaboradores para visualizar e editar seus funis."})]}),e.jsxs("button",{onClick:()=>x(!0),disabled:d,className:`flex items-center gap-2 px-6 py-3 rounded-xl font-bold shadow-lg transition-all transform 
                ${d?"bg-slate-300 dark:bg-slate-800 text-slate-500 cursor-not-allowed shadow-none":"bg-indigo-600 hover:bg-indigo-500 text-white hover:shadow-indigo-500/20 hover:-translate-y-1"}`,title:d?"Limite de membros atingido":"Convidar novo membro","aria-label":d?"Limite de membros atingido":"Convidar novo membro",children:[e.jsx(L,{size:20}),d?"Limite Atingido":"Convidar Membro"]})]}),e.jsxs("div",{className:"mb-8 p-6 rounded-2xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(D,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Plano ",h]}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Limite da sua equipe"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-3xl font-bold",children:r.length}),e.jsxs("span",{className:"text-indigo-200",children:[" / ",l===9999?"∞":l," usuários"]})]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden","aria-label":`Uso da equipe: ${Math.round(o)}%`,title:`Uso da equipe: ${Math.round(o)}%`,children:e.jsx("div",{ref:m,className:`h-full rounded-full transition-all duration-1000 ${o>90?"bg-red-500":"bg-indigo-600"}`})}),o>=100&&l!==9999&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm bg-white/10 p-2 rounded-lg text-indigo-100",children:[e.jsx(C,{size:16}),e.jsx("span",{children:"Você atingiu o limite do seu plano. Fale com o suporte para expandir."})]})]}),e.jsxs("div",{className:`rounded-2xl border overflow-visible ${z}`,children:[e.jsxs("div",{className:`p-4 border-b flex items-center justify-between ${s?"bg-slate-900 border-slate-700":"bg-slate-50 border-slate-200"}`,children:[e.jsx("h3",{className:`font-bold ${c}`,children:"Membros Ativos"}),e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${s?"bg-slate-800 text-slate-400":"bg-white text-slate-500 border border-slate-200"}`,children:["Total: ",r.length]})]}),e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:r.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-400",children:[e.jsx(U,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Sua equipe está vazia."}),e.jsx("p",{className:"text-sm",children:"Convide alguém para começar a colaborar."})]}):r.map(t=>{var w;if(!t)return null;const a=t.name||((w=t.email)==null?void 0:w.split("@")[0])||"Membro",q=a.substring(0,2).toUpperCase();return e.jsxs("div",{className:"p-4 flex items-center justify-between group hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white shadow-sm
                                    ${t.role==="ADMIN"?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-gradient-to-br from-blue-400 to-indigo-500"}
                                `,children:q}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold text-sm ${c}`,children:a}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx(y,{size:12})," ",t.email||"Sem e-mail"]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative group/role",children:[e.jsx("select",{value:t.role||"VIEWER",onChange:T=>$(t.id,T.target.value),title:"Alterar função do membro","aria-label":"Selecionar função do membro",className:`appearance-none pl-3 pr-8 py-1.5 rounded-lg border text-xs font-bold uppercase cursor-pointer outline-none focus:ring-2 focus:ring-indigo-500 transition-all
                                            ${t.role==="ADMIN"?"bg-amber-50 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800":"bg-indigo-50 text-indigo-700 border-indigo-200 dark:bg-indigo-900/30 dark:text-indigo-400 dark:border-indigo-800"}
                                        `,children:e.jsx("option",{value:"EDITOR",children:"Editor"})}),e.jsx(G,{size:12,className:`absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none ${t.role==="ADMIN"?"text-amber-600":"text-indigo-600"}`})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium px-2 py-1 rounded
                                                    ${t.status==="ACTIVE"?"text-green-600 bg-green-50 dark:bg-green-900/20 dark:text-green-400":"text-slate-500 bg-slate-100 dark:bg-slate-800 dark:text-slate-400"}
                                                `,children:[t.status==="ACTIVE"?e.jsx(H,{size:14}):e.jsx(Q,{size:14}),t.status==="ACTIVE"?"Ativo":"Pendente"]}),t.status==="PENDING"&&e.jsx("button",{onClick:()=>I(t.email),className:"px-3 py-1.5 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-lg text-xs font-bold transition-all disabled:opacity-50 disabled:cursor-wait",title:"Reenviar convite de acesso","aria-label":"Reenviar convite de acesso",children:"Reenviar"}),e.jsx("button",{onClick:()=>A(t.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:`Remover ${a}`,"aria-label":`Remover ${a}`,children:e.jsx(W,{size:18,"aria-hidden":"true"})})]})]})]},t.id||Math.random().toString())})})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in-up",children:e.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-2xl p-6 border ${s?"bg-slate-900 border-slate-700":"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:`text-xl font-bold ${c}`,children:"Convidar Membro"}),e.jsx("button",{onClick:()=>x(!1),className:`p-1.5 rounded-full ${s?"hover:bg-slate-800 text-slate-400":"hover:bg-slate-100 text-slate-500"}`,title:"Fechar modal","aria-label":"Fechar modal",children:e.jsx(X,{size:20,"aria-hidden":"true"})})]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invite-name",className:`block text-sm font-bold mb-1 ${n}`,children:"Nome do Colaborador"}),e.jsx("input",{id:"invite-name",type:"text",required:!0,autoFocus:!0,value:g,onChange:t=>v(t.target.value),placeholder:"Ex: Ana Silva",className:`w-full p-3 rounded-xl border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${s?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-200 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invite-plan",className:`block text-sm font-bold mb-1 ${n}`,children:"Tipo de Convite"}),e.jsx("select",{id:"invite-plan",value:"CONVIDADO",disabled:!0,className:`w-full p-3 rounded-xl border outline-none bg-slate-100 text-slate-500 cursor-not-allowed ${s?"bg-slate-800 border-slate-700":"bg-slate-100 border-slate-200"}`,children:e.jsx("option",{value:"CONVIDADO",children:"Convidado (Plano Convidado)"})}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"O usuário será adicionado automaticamente ao Plano Convidado."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"invite-email",className:`block text-sm font-bold mb-1 ${n}`,children:"E-mail do Colaborador"}),e.jsx("input",{id:"invite-email",type:"email",required:!0,value:p,onChange:t=>f(t.target.value),placeholder:"nome@empresa.com",className:`w-full p-3 rounded-xl border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${s?"bg-slate-800 border-slate-700 text-white":"bg-slate-50 border-slate-200 text-slate-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-bold mb-1 ${n}`,children:"Permissão de Acesso"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:e.jsx("button",{type:"button",className:"py-2 px-1 rounded-lg text-xs font-bold border transition-all bg-indigo-600 text-white border-indigo-600 shadow-md cursor-default",title:"Função Editor",children:"EDITOR"})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Pode editar fluxos e configurações do projeto."}),e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 mt-2 font-medium flex items-center gap-1",children:[e.jsx(C,{size:10})," O convite é enviado via e-mail. Peça para o membro verificar a pasta de spam."]})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:`flex-1 py-3 rounded-xl font-bold transition-colors ${s?"text-slate-400 hover:text-white hover:bg-slate-800":"text-slate-500 hover:text-slate-800 hover:bg-slate-100"}`,title:"Cancelar convite","aria-label":"Cancelar convite",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:j,className:"flex-[2] py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 flex items-center justify-center gap-2",title:"Enviar Convite","aria-label":"Enviar Convite",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{size:18})," Enviar Convite"]})})]})]})]})})]})};export{te as default};
